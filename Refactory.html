<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Outbox Device Financing Form</title>
  <link rel="icon" type="image/png" href="assets/favicon-32x32.png" sizes="32x32">
  <style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #f4f6f8;
    margin: 0;
    padding: 0;
    color: #333;
  }

  .container {
    max-width: 750px;
    margin: 40px auto;
    background: #fff;
    padding: 35px;
    border-radius: 12px;
    box-shadow: 0 6px 18px rgba(0, 0, 0, 0.08);
  }

  #partner-logo img {
    display: block;
    margin: 0 auto 20px;
    max-width: 160px;
  }

  h1 {
    text-align: center;
    font-size: 28px;
    margin-bottom: 10px;
    color: #2c3e50;
  }

  /* ✅ Updated paragraph style */
  p.intro {
    text-align: justify;
    font-size: 16px;
    line-height: 1.7;
    margin-bottom: 30px;
    color: #555;
  }

  h2.section-title {
    font-size: 20px;
    margin-top: 30px;
    margin-bottom: 15px;
    color: #34495e;
    border-bottom: 1px solid #ddd;
    padding-bottom: 5px;
  }

  form {
    display: flex;
    flex-direction: column;
    gap: 18px;
  }

  label {
    font-weight: 600;
    margin-bottom: 5px;
  }
/* Apply consistent styling to all inputs */
input.styled-input,
input[type="text"],
input[type="email"],
input[type="tel"],
input[type="file"],
select {
  padding: 10px;
  border-radius: 6px;
  border: 1px solid #ccc;
  font-size: 14px;
  width: 100%;
  box-sizing: border-box;
  transition: border 0.2s;
}

input.styled-input:focus,
input[type="text"]:focus,
input[type="email"]:focus,
input[type="tel"]:focus,
input[type="file"]:focus,
select:focus {
  border-color: #2c3e50;
  outline: none;
  box-shadow: 0 0 5px rgba(44, 62, 80, 0.2);
}


  .row {
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
  }

  .row .col {
    flex: 1;
    min-width: 200px;
    display: flex;
    flex-direction: column;
  }

  .checkbox-group {
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
    margin-top: 5px;
  }

  .checkbox-group label {
    font-weight: normal;
  }

  #businessFields,
  #ninField,
  #otherIdField {
    margin-top: 10px;
  }

  button {
    margin-top: 25px;
    padding: 14px 0;
    font-size: 16px;
    font-weight: bold;
    border-radius: 8px;
    border: none;
    background-color: #2c3e50;
    color: #fff;
    cursor: pointer;
    transition: background-color 0.2s;
  }

  button:hover {
    background-color: #34495e;
  }

  .note {
    font-size: 0.9em;
    color: #7f8c8d;
    margin-top: 10px;
    text-align: center;
  }

  @media (max-width: 600px) {
    .row {
      flex-direction: column;
    }
  }
</style>

</head>
<body>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Outbox Device Financing Form</title>
  <style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #f4f6f8;
    margin: 0;
    padding: 0;
    color: #333;
  }

  .container {
    max-width: 750px;
    margin: 40px auto;
    background: #fff;
    padding: 35px;
    border-radius: 12px;
    box-shadow: 0 6px 18px rgba(0, 0, 0, 0.08);
  }

  #partner-logo img {
    display: block;
    margin: 0 auto 20px;
    max-width: 160px;
  }

  h1 {
    text-align: center;
    font-size: 28px;
    margin-bottom: 10px;
    color: #2c3e50;
  }

  /* ✅ Updated paragraph style */
  p.intro {
    text-align: justify;
    font-size: 16px;
    line-height: 1.7;
    margin-bottom: 30px;
    color: #555;
  }

  h2.section-title {
    font-size: 20px;
    margin-top: 30px;
    margin-bottom: 15px;
    color: #34495e;
    border-bottom: 1px solid #ddd;
    padding-bottom: 5px;
  }

  form {
    display: flex;
    flex-direction: column;
    gap: 18px;
  }

  label {
    font-weight: 600;
    margin-bottom: 5px;
  }
/* Apply consistent styling to all inputs */
input.styled-input,
input[type="text"],
input[type="email"],
input[type="tel"],
input[type="file"],
select {
  padding: 10px;
  border-radius: 6px;
  border: 1px solid #ccc;
  font-size: 14px;
  width: 100%;
  box-sizing: border-box;
  transition: border 0.2s;
}

input.styled-input:focus,
input[type="text"]:focus,
input[type="email"]:focus,
input[type="tel"]:focus,
input[type="file"]:focus,
select:focus {
  border-color: #2c3e50;
  outline: none;
  box-shadow: 0 0 5px rgba(44, 62, 80, 0.2);
}


  .row {
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
  }

  .row .col {
    flex: 1;
    min-width: 200px;
    display: flex;
    flex-direction: column;
  }

  .checkbox-group {
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
    margin-top: 5px;
  }

  .checkbox-group label {
    font-weight: normal;
  }

  #businessFields,
  #ninField,
  #otherIdField {
    margin-top: 10px;
  }

  button {
    margin-top: 25px;
    padding: 14px 0;
    font-size: 16px;
    font-weight: bold;
    border-radius: 8px;
    border: none;
    background-color: #2c3e50;
    color: #fff;
    cursor: pointer;
    transition: background-color 0.2s;
  }

  button:hover {
    background-color: #34495e;
  }

  .note {
    font-size: 0.9em;
    color: #7f8c8d;
    margin-top: 10px;
    text-align: center;
  }

  @media (max-width: 600px) {
    .row {
      flex-direction: column;
    }
  }
</style>

</head>
<body>
  <div class="container">
    <!-- Partner Logo -->
    <div id="partner-logo">
      <img id="partnerLogo" src="assets/refactory_logo_1000x1000.png" alt="Refactory Logo">
    </div>

    <h1>Refactory Device Financing Form</h1>
    <p class="intro">
      Welcome to the Refactory Device Financing Program. Please fill out this form carefully to help us assess 
      your eligibility for device financing. Your responses will be kept confidential.
    </p>

    <form id="deviceForm">
      <!-- Participant Info -->
      <h2 class="section-title">Participant Details</h2>
      <div class="row">
        <div class="col">
          <label for="firstName">First Name *</label>
          <input type="text" id="firstName" name="firstName" required>
        </div>
        <div class="col">
          <label for="lastName">Last Name *</label>
          <input type="text" id="lastName" name="lastName" required>
        </div>
      </div>

      <label for="email">Email Address *</label>
      <input type="email" id="email" name="email" placeholder="Email used for 10X Foundation course" required>

      <label for="telephone">Telephone Number (MTN or Airtel) *</label>
      <input type="tel" id="telephone" name="telephone" required>

      <label for="numberRegistered">Is the number registered in your name? *</label>
      <div class="checkbox-group">
        <label><input type="radio" name="numberRegistered" value="Yes" required> Yes</label>
        <label><input type="radio" name="numberRegistered" value="No"> No</label>
      </div>

      <div id="registeredNameField" style="display:none;">
        <label for="registeredName">In whose name is the number registered? *</label>
        <input type="text" id="registeredName" name="registeredName">
      </div>

      <label for="disabled">Are you disabled? *</label>
      <div class="checkbox-group">
        <label><input type="radio" name="disabled" value="Yes" required> Yes</label>
        <label><input type="radio" name="disabled" value="No"> No</label>
      </div>

      <!-- Business Details -->
      <label>
        <input type="checkbox" id="hasBusiness" checked> I have a registered business
      </label>

      <div id="businessFields">
        <label for="businessName">Business Name *</label>
        <input type="text" id="businessName" name="businessName">

        <label for="district">District (where your business operates) *</label>
        <select id="district" name="district">
          <option value="">Select District</option>
          <option value="Agago">Agago</option>
          <option value="Amolatar">Amolatar</option>
          <option value="Amuria">Amuria</option>
          <option value="Amuru">Amuru</option>
          <option value="Apac">Apac</option>
          <option value="Arua">Arua</option>
          <option value="Yumbe">Yumbe</option>
          <option value="Other">Other</option>
        </select>

        <label for="tin">TIN Number *</label>
        <input type="text" id="tin" name="tin">

        <label for="confirmTin">Confirm TIN Number *</label>
        <input type="text" id="confirmTin" name="confirmTin">

        <label for="businessLicense">Business License Number *</label>
        <input type="text" id="businessLicense" name="businessLicense">
      </div>

      <label for="village">Village *</label>
      <input type="text" id="village" name="village" required>

      <!-- ID Type & Upload -->
      <label for="idType">Type of ID *</label>
      <select id="idType" name="idType" required>
        <option value="">Select ID type</option>
        <option value="National ID">National ID</option>
        <option value="Passport">Passport</option>
        <option value="Other">Other</option>
      </select>

      <div id="ninField" style="display:none;">
        <label for="nin">National Identification Number (NIN) *</label>
        <input type="text" id="nin" name="nin">
      </div>

      <div id="otherIdField" style="display:none;">
        <label for="otherIdNumber">ID Number *</label>
        <input type="text" id="otherIdNumber" name="otherIdNumber">
      </div>

      <label for="idFront">Upload ID (Front) *</label>
      <input type="file" id="idFront" name="idFront" accept=".png,.jpg,.jpeg" required>

      <label for="idBack">Upload ID (Back) *</label>
      <input type="file" id="idBack" name="idBack" accept=".png,.jpg,.jpeg" required>

      <!-- Device Info -->
      <h2 class="section-title">Device Information</h2>
      
      <label for="deviceType">Device Type *</label>
      <select id="deviceType" name="deviceType" required>
        <option value="">Select device type</option>
        <option value="Laptop" selected>Laptop</option>
        <option value="Tablet">Tablet</option>
        <option value="Smartphone">Smartphone</option>
      </select>

      <label for="priceRange">Provide the total price you are comfortable with for the device *</label>
      <input type="number" id="priceRange" name="priceRange" placeholder="Enter total price (UGX)" required>

      <label for="paymentDuration">Preferred Payment installment periods *</label>
      <select id="paymentDuration" name="paymentDuration" required>
        <option value="">Select duration</option>
        <option value="Weekly">Weekly (52 installments)</option>
        <option value="Bi-Weekly">Bi-Weekly (26 installments)</option>
        <option value="Monthly">Monthly (12 installments)</option>
        <option value="3-Months">Every 3 Months (Quarterly, 4 installments)</option>
        <option value="6-Months">Every 6 Months (Semi-Annual, 2 installments)</option>
        <option value="Yearly">Yearly (1 installment)</option>
      </select>

      <label for="installmentAmount">Preferred Installment Amount</label>
      <input type="text" id="installmentAmount" name="installmentAmount" placeholder="Calculated automatically" readonly>
      

      <button type="submit">Submit</button>
      <p class="note">Fields marked with * are mandatory.</p>
    </form>
  </div>
</body>
<script>
  // Toggle business fields
  const hasBusiness = document.getElementById('hasBusiness');
  const businessFields = document.getElementById('businessFields');
  
  function toggleBusinessFields() {
    if (hasBusiness.checked) {
      businessFields.style.display = 'block';
      ['businessName','district','tin','confirmTin','businessLicense'].forEach(id => {
        const el = document.getElementById(id);
        if (el) el.required = true;
      });
    } else {
      businessFields.style.display = 'none';
      ['businessName','district','tin','confirmTin','businessLicense'].forEach(id => {
        const el = document.getElementById(id);
        if (el) el.required = false;
      });
    }
  }

  hasBusiness.addEventListener('change', toggleBusinessFields);
  toggleBusinessFields(); // initialize on page load

  // Phone number registration toggle
  const registeredNameField = document.getElementById('registeredNameField');
  const numberRegisteredRadios = document.querySelectorAll('input[name="numberRegistered"]');
  
  numberRegisteredRadios.forEach(radio => {
    radio.addEventListener('change', () => {
      if (radio.value === 'No' && radio.checked) {
        registeredNameField.style.display = 'block';
        document.getElementById('registeredName').required = true;
      } else if (radio.value === 'Yes' && radio.checked) {
        registeredNameField.style.display = 'none';
        document.getElementById('registeredName').required = false;
      }
    });
  });

  // ID type toggle
  const idType = document.getElementById('idType');
  const ninField = document.getElementById('ninField');
  const otherIdField = document.getElementById('otherIdField');

  idType.addEventListener('change', () => {
    if (idType.value === 'National ID') {
      ninField.style.display = 'block';
      ninField.querySelector('input').required = true;
      otherIdField.style.display = 'none';
      otherIdField.querySelector('input').required = false;
    } else if (idType.value === 'Passport' || idType.value === 'Other') {
      otherIdField.style.display = 'block';
      otherIdField.querySelector('input').required = true;
      ninField.style.display = 'none';
      ninField.querySelector('input').required = false;
    } else {
      ninField.style.display = 'none';
      otherIdField.style.display = 'none';
      ninField.querySelector('input').required = false;
      otherIdField.querySelector('input').required = false;
    }
  });

  // File validation
  function validateFile(fileInput) {
    const allowed = ['image/png','image/jpeg','image/jpg'];
    const file = fileInput.files[0];
    if(file && !allowed.includes(file.type)) {
      alert("Please upload only PNG, JPG, or JPEG files.");
      fileInput.value = '';
    }
  }

  document.getElementById('idFront').addEventListener('change', function(){validateFile(this);});
  document.getElementById('idBack').addEventListener('change', function(){validateFile(this);});

  // Auto-calculate installment
  const priceRange = document.getElementById('priceRange');
  const paymentDuration = document.getElementById('paymentDuration');
  const installmentAmount = document.getElementById('installmentAmount');

  function calculateInstallment() {
    const price = parseFloat(priceRange.value);
    const duration = paymentDuration.value;
    if (!price || !duration) {
      installmentAmount.value = '';
      return;
    }

    let periods = 1;
    switch(duration){
      case 'Weekly': periods = 52; break;
      case 'Bi-Weekly': periods = 26; break;
      case 'Monthly': periods = 12; break;
      case '3-Months': periods = 4; break;
      case '6-Months': periods = 2; break;
      case 'Yearly': periods = 1; break;
    }

    const installment = price / periods;
    installmentAmount.value = installment.toLocaleString('en-UG', {
      style:'currency', currency:'UGX', minimumFractionDigits:0
    });
  }

  priceRange.addEventListener('input', calculateInstallment);
  paymentDuration.addEventListener('change', calculateInstallment);

  // Form submission
  const form = document.getElementById('deviceForm');
  form.addEventListener('submit', function(e) {
    e.preventDefault();

    // Validate TIN if business fields are visible
    if(hasBusiness.checked){
      const tin = document.getElementById('tin').value.trim();
      const confirmTin = document.getElementById('confirmTin').value.trim();
      if(tin !== confirmTin){
        alert("TIN numbers do not match.");
        return;
      }
    }

    alert("Form submitted successfully! (Prototype)");
    form.reset();
    toggleBusinessFields(); // reset toggle state
    installmentAmount.value = '';
  });
</script>


</body>
</html>
